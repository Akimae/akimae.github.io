{"title":"46-定时器","slug":"JavaScript/46-定时器","date":"2023-02-17T13:27:58.622Z","updated":"2023-02-17T13:28:13.892Z","comments":true,"path":"api/articles/JavaScript/46-定时器.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<p><ArticleTopAd></ArticleTopAd></p>\n<h2 id=\"定时器的常见方法\"><a href=\"#定时器的常见方法\" class=\"headerlink\" title=\"定时器的常见方法\"></a>定时器的常见方法</h2><ul>\n<li><p>setInterval()：循环调用。将一段代码，<strong>每隔一段时间</strong>执行一次。（循环执行）</p>\n</li>\n<li><p>setTimeout()：延时调用。将一段代码，等待一段时间之后<strong>再执行</strong>。（只执行一次）</p>\n</li>\n</ul>\n<p>备注：在实际开发中，二者是可以根据需要，互相替代的。</p>\n<h2 id=\"setInterval-的使用\"><a href=\"#setInterval-的使用\" class=\"headerlink\" title=\"setInterval() 的使用\"></a>setInterval() 的使用</h2><p><code>setInterval()</code>：循环调用。将一段代码，<strong>每隔一段时间</strong>执行一次。（循环执行）</p>\n<p><strong>参数</strong>：</p>\n<ul>\n<li><p>参数1：回调函数，该函数会每隔一段时间被调用一次。</p>\n</li>\n<li><p>参数2：每次调用的间隔时间，单位是毫秒。</p>\n</li>\n</ul>\n<p><strong>返回值</strong>：返回一个Number类型的数据。这个数字用来作为定时器的<strong>唯一标识</strong>，方便用来清除定时器。</p>\n<h3 id=\"定义定时器\"><a href=\"#定义定时器\" class=\"headerlink\" title=\"定义定时器\"></a>定义定时器</h3><p><strong>方式一</strong>：匿名函数</p>\n<p>每间隔一秒，将 数字 加1：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">let</span> num = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"built_in\">setInterval</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    num ++;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(num);</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n\n<p><strong>方式二：</strong></p>\n<p>每间隔一秒，将 数字 加1：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">setInterval</span>(fn,<span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">   num ++;</span><br><span class=\"line\">   <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(num);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"清除定时器\"><a href=\"#清除定时器\" class=\"headerlink\" title=\"清除定时器\"></a>清除定时器</h3><p>定时器的返回值是作为这个定时器的<strong>唯一标识</strong>，可以用来清除定时器。具体方法是：假设定时器setInterval()的返回值是<code>参数1</code>，那么<code>clearInterval(参数1)</code>就可以清除定时器。</p>\n<p>setTimeout()的道理是一样的。</p>\n<p>代码举例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> num = <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">const</span> timer = <span class=\"built_in\">setInterval</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(num);  <span class=\"comment\">//每间隔一秒，打印一次num的值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        num ++;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">if</span>(num === <span class=\"number\">5</span>) &#123;  <span class=\"comment\">//打印四次之后，就清除定时器</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"built_in\">clearInterval</span>(timer);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;, <span class=\"number\">1000</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"setTimeout-的使用\"><a href=\"#setTimeout-的使用\" class=\"headerlink\" title=\"setTimeout() 的使用\"></a>setTimeout() 的使用</h2><p><code>setTimeout()</code>：延时调用。将一段代码，等待一段时间之后<strong>再执行</strong>。（只执行一次）</p>\n<p><strong>参数</strong>：</p>\n<ul>\n<li><p>参数1：回调函数，该函数会每隔一段时间被调用一次。</p>\n</li>\n<li><p>参数2：每次调用的间隔时间，单位是毫秒。</p>\n</li>\n</ul>\n<p><strong>返回值</strong>：返回一个Number类型的数据。这个数字用来作为定时器的<strong>唯一标识</strong>，方便用来清除定时器。</p>\n<h3 id=\"定义和清除定时器\"><a href=\"#定义和清除定时器\" class=\"headerlink\" title=\"定义和清除定时器\"></a>定义和清除定时器</h3><p>代码举例：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> timer = <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>); <span class=\"comment\">// 3秒之后，再执行这段代码。</span></span><br><span class=\"line\">&#125;, <span class=\"number\">3000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>代码举例：（箭头函数写法）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>); <span class=\"comment\">// 3秒之后，再执行这段代码。</span></span><br><span class=\"line\">&#125;, <span class=\"number\">3000</span>);</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"setTimeout-举例：5秒后关闭网页两侧的广告栏\"><a href=\"#setTimeout-举例：5秒后关闭网页两侧的广告栏\" class=\"headerlink\" title=\"setTimeout() 举例：5秒后关闭网页两侧的广告栏\"></a>setTimeout() 举例：5秒后关闭网页两侧的广告栏</h3><p>假设网页两侧的广告栏为两个img标签，它们的样式为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>5秒后关闭广告栏的js代码为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">window</span>.<span class=\"property\">onload</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//获取相关元素</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> imgArr = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;img&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//设置定时器：5秒后关闭两侧的广告栏</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"built_in\">setTimeout</span>(fn,<span class=\"number\">5000</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            imgArr[<span class=\"number\">0</span>].<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&quot;none&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            imgArr[<span class=\"number\">1</span>].<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&quot;none&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n","categories":[{"name":"JavaScript","slug":"JavaScript","count":52,"path":"api/categories/JavaScript.json"}],"tags":[{"name":"JavaScript","slug":"JavaScript","count":52,"path":"api/tags/JavaScript.json"}]}